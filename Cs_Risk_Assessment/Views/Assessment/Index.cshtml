@using Cs_Risk_Assessment.Statics;
@{
	ViewData["Title"] = "Assessment";
	Layout = "~/Views/Shared/_templateLayout.cshtml";
}

@section OtherHeadContent {
<style>
		table {
			width: 200px;
			border-collapse: collapse;
			border: 1px solid #000;
		}

		th, td {
			padding: 8px;
			text-align: left;
			border: 1px solid #000;
		}

		th {
			background-color: #f2f2f2;
		}


		td input
		{
			width:150px;
		}
</style>
}

<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
	<li class="nav-item" role="presentation">
		<button class="nav-link active " id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">List Of Assets</button>
	</li>
	<li class="nav-item" role="presentation">
		<button class="nav-link disabled" id="step2" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Vulnerability</button>
	</li>
	<li class="nav-item" role="presentation">
		<button class="nav-link disabled" id="step3" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Asset Initial Risk</button>
	</li>
</ul>
<div class="tab-content" id="pills-tabContent">
	<div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
		<div class="card">
			<div class="card-body">
				<form asp-controller="Assessment" asp-action="Step2" method="post">
					<h1>Hardware Assets</h1>
					@foreach (var item in AssetCategories.HardwareAssets.Items)
					{

						<input type="checkbox" class="asset-checkbox" id="@($"chk_{item.Key}")" value="@item.Value">
						<label for="@($"chk_{item.Key}")">@item.Value</label>
						<div id="@($"tableContainer_{item.Key}")"></div>
						<br>
					}

					<h1>Software Assets</h1>
					@foreach (var item in AssetCategories.SoftwareAssets.Items)
					{
						<input type="checkbox" class="asset-checkbox" id="@($"chk_{item.Key}")" value="@item.Value">
						<label for="@($"chk_{item.Key}")">@item.Value</label>
						<div id="@($"tableContainer_{item.Key}")"></div>
						<br>
					}

					<h1>Data Assets</h1>
					@foreach (var item in AssetCategories.DataAssets.Items)
					{
						<input type="checkbox" class="asset-checkbox" id="@($"chk_{item.Key}")" value="@item.Value">
						<label for="@($"chk_{item.Key}")">@item.Value</label>
						<div id="@($"tableContainer_{item.Key}")"></div>
						<br>
					}

					<h1>Software Assets</h1>
					@foreach (var item in AssetCategories.ServicesAssets.Items)
					{
						<input type="checkbox" class="asset-checkbox" id="@($"chk_{item.Key}")" value="@item.Value">
						<label for="@($"chk_{item.Key}")">@item.Value</label>
						<div id="@($"tableContainer_{item.Key}")"></div>
						<br>
					}

					<div id="customTableList"></div>

					<a onclick="CreateCustomTable()" class="btn btn-primary mt-2">Add New Asset</a>

					<div class="mt-4">
						<button class="btn btn-info" type="submit">Next</button>
					</div>

				</form>
			</div>
		</div>
	</div>
	@* <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">...</div>
	<div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">...</div> *@
</div>



@section OtherPageScripts
{
	@* CheckBox Table *@
	<script>
		$(document).ready(function () {
			$('.asset-checkbox').change(function () {
				var checkboxId = $(this).attr('id');
				var checkboxValue = $(this).attr('value');
				var tableId = checkboxId.replace('chk_', 'table_');
				var tableHtml = `
						<table class="mt-2">
							<thead>
								<tr>
									<th>Asset name</th>
									<th>Asset type</th>
									<th>Reference</th>
									<th>Location of Asset</th>
									<th>Asset owner</th>
								</tr>
							</thead>
							<tbody>
								<tr>
										<td><input type="text" name="AssetName" value="${checkboxValue}" required></td>
										<td><input type="text" name="AssetType" required></td>
										<td><input type="text" name="Reference" required></td>
										<td><input type="text" name="Location" required></td>
										<td><input type="text" name="Owner" required></td>
								</tr>
							</tbody>
						</table>
					`;

				var containerId = checkboxId.replace('chk_', 'tableContainer_');

				if (this.checked) {
					$('#' + containerId).html(tableHtml);
				} else {
					$('#' + containerId).html('');
				}
			});
		});
	</script>


	@* Custom Table *@
	<script>
		function CreateCustomTable() {
			var customTableList = document.getElementById("customTableList");
			var tableHtml = `
					<table class="mt-2">
						<thead>
							<tr>
								<th>Asset name</th>
								<th>Asset type</th>
								<th>Reference</th>
								<th>Location of Asset</th>
								<th>Asset owner</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><input type="text" name="AssetName" required></td>
								<td><input type="text" name="AssetType" required></td>
								<td><input type="text" name="Reference" required></td>
								<td><input type="text" name="Location" required></td>
								<td><input type="text" name="Owner" required></td>
							</tr>
						</tbody>
					</table>
				`;
			// Create a new div element to hold the table
			var newTableDiv = document.createElement("div");
			// Set the HTML content of the new div to the table HTML
			newTableDiv.innerHTML = tableHtml;
			// Append the new div (containing the table) to the customTableList div
			customTableList.appendChild(newTableDiv);
		}
	</script>



}

